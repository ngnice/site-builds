<p>什么是一个 Observer ? Observer 是一个被 Observable 推送的值的消费者。 Observers 只是一系列回调，对应于 Observable 推送的 next 、 error 、 complete 三种类型的通知。下面的示例是一个经典的 Observer 的对象。</p>
<pre><code><div><span class="token keyword">const</span> observer <span class="token operator">=</span> {
  <span class="token keyword">next</span><span class="token punctuation">:</span> x <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Observer got a next value: '</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> err <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Observer got an error: '</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">,</span>
  complete<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Observer got a complete notification'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>
</div></code></pre><p>想要使用 Observer ，需要为 Observable 的 subscribe 提供它自己。</p>
<pre><code><div>observable<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>
</div></code></pre><blockquote>
<p>Observer 只是具有三个回调的对象，一个对应于一个 Observable 可能推送的每种通知类型。</p>
</blockquote>
<p>Observers 在 RxJs 也可能只是部分观察者。如果你不提供任何一种回调， Observable 的执行仍然将会正常执行，除了一些类型的通知将被忽略，因为它们在 Observer 中没有相应的回调。</p>
<p>下面的示例是一个没有 complete 回调的 Observer。</p>
<pre><code><div><span class="token keyword">const</span> observer <span class="token operator">=</span> {
  <span class="token keyword">next</span><span class="token punctuation">:</span> x <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Observer got a next value: '</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> err <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Observer got an error: '</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">,</span>
}<span class="token comment" spellcheck="true">;</span>
</div></code></pre><p>订阅 Observable 时，你也可以只提供回调作为参数，而不必附加到 Observer 对象，像这个示例一样。</p>
<pre><code><div>observable<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>x <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Observer got a next value: '</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span></div></code></pre><p>在 observable.subscribe 内部，它将使用第一个回调参数作为下一个处理程序创建一个 Observer 对象。 所有三种回调类型都可以作为参数提供。</p>
<pre><code><div>observable<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>
  x <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Observer got a next value: '</span> <span class="token operator">+</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span>
  err <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Observer got an error: '</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Observer got a complete notification'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span></div></code></pre>